<div dir="rtl" align="right">

<p align="center">
  <img src="https://img.shields.io/badge/🔐_نظام_المصادقة-Mazzady-red?style=for-the-badge" alt="Authentication"/>
</p>

<h1 align="center">🔒 دليل نظام المصادقة والتسجيل</h1>

---

## 📋 نظرة عامة

نظام مصادقة آمن ومتكامل يدعم:

```
┌─────────────────────────────────────────────────────────┐
│                  🔐 طرق المصادقة                        │
├─────────────────────────────────────────────────────────┤
│  📧 Email/Password    │  التسجيل التقليدي              │
│  🔵 Google OAuth      │  تسجيل بحساب جوجل              │
│  🔷 Facebook OAuth    │  تسجيل بحساب فيسبوك            │
└─────────────────────────────────────────────────────────┘
```

---

## 📝 نظام التسجيل (Sign Up)

### الخطوات الـ 8

```
┌─────────────────────────────────────────────────────────┐
│  1️⃣ الاسم الثلاثي + النيك نيم                          │
│      • الاسم الأول (مطلوب)                              │
│      • الاسم الأوسط (مطلوب)                             │
│      • اسم العائلة (مطلوب)                              │
│      • النيك نيم (فريد - للعرض العام)                   │
├─────────────────────────────────────────────────────────┤
│  2️⃣ رقم التليفون                                       │
│      • صيغة مصرية فقط                                   │
│      • يبدأ بـ 01 (11 رقم)                              │
│      • مثال: 01012345678                                │
├─────────────────────────────────────────────────────────┤
│  3️⃣ الرقم القومي + صور البطاقة                         │
│      • 14 رقم (يبدأ بـ 2 أو 3)                          │
│      • صورة الوجه (حد أقصى 2 ميجا)                      │
│      • صورة الظهر (حد أقصى 2 ميجا)                      │
├─────────────────────────────────────────────────────────┤
│  4️⃣ البريد الإلكتروني                                  │
│      • يُرسل كود التحقق تلقائياً                        │
├─────────────────────────────────────────────────────────┤
│  5️⃣ التحقق من الإيميل                                  │
│      • كود 6 أرقام                                      │
│      • صلاحية 10 دقائق                                  │
│      • إمكانية إعادة الإرسال                            │
├─────────────────────────────────────────────────────────┤
│  6️⃣ كلمة المرور                                        │
│      • 8 أحرف على الأقل                                 │
│      • حرف كبير + صغير + رقم                           │
│      • تأكيد كلمة المرور                                │
├─────────────────────────────────────────────────────────┤
│  7️⃣ مراجعة البيانات                                    │
│      • عرض جميع البيانات المدخلة                        │
│      • إمكانية العودة للتعديل                           │
├─────────────────────────────────────────────────────────┤
│  8️⃣ رسالة النجاح                                       │
│      • تأكيد إنشاء الحساب                               │
│      • توجيه لصفحة تسجيل الدخول                        │
└─────────────────────────────────────────────────────────┘
```

### التحقق من صحة البيانات

| الحقل        | القواعد                      |
| ------------ | ---------------------------- |
| الاسم        | 2-50 حرف، عربي أو إنجليزي    |
| النيك نيم    | 3-20 حرف، فريد، بدون مسافات  |
| التليفون     | 11 رقم، يبدأ بـ 01           |
| الرقم القومي | 14 رقم، يبدأ بـ 2 أو 3       |
| الإيميل      | صيغة صحيحة، فريد             |
| كلمة المرور  | 8+ أحرف، حرف كبير، صغير، رقم |

---

## 🔑 نظام تسجيل الدخول (Login)

### الخطوات الـ 5

```
┌─────────────────────────────────────────────────────────┐
│  1️⃣ البريد الإلكتروني                                  │
│      • إدخال الإيميل المسجل                             │
├─────────────────────────────────────────────────────────┤
│  2️⃣ كلمة المرور                                        │
│      • إدخال كلمة المرور                                │
│      • خيار "تذكرني" (7 أيام)                          │
├─────────────────────────────────────────────────────────┤
│  3️⃣ مراجعة البيانات                                    │
│      • عرض Carousel بالمعلومات                          │
├─────────────────────────────────────────────────────────┤
│  4️⃣ كود التحقق                                         │
│      • 6 أرقام للأمان الإضافي                           │
├─────────────────────────────────────────────────────────┤
│  5️⃣ Welcome Back!                                      │
│      • رسالة ترحيب                                      │
│      • توجيه تلقائي للصفحة الرئيسية                    │
└─────────────────────────────────────────────────────────┘
```

---

## 🔵 تسجيل الدخول بـ Google

### الخطوات

```
1️⃣ المستخدم يضغط "تسجيل بـ Google"
        ↓
2️⃣ توجيه لصفحة Google
        ↓
3️⃣ المستخدم يختار الحساب
        ↓
4️⃣ Google يرسل البيانات للنظام
        ↓
5️⃣ إذا مستخدم جديد:
   • يُطلب إكمال البيانات (تليفون، رقم قومي)
   إذا مستخدم موجود:
   • تسجيل دخول مباشر
```

### البيانات المستلمة من Google

| البيانات | الاستخدام        |
| -------- | ---------------- |
| Email    | للتعريف والتواصل |
| Name     | الاسم الكامل     |
| Picture  | صورة البروفايل   |
| ID       | للربط بالحساب    |

---

## 🔷 تسجيل الدخول بـ Facebook

### نفس آلية Google مع اختلافات بسيطة

```
• يتطلب تصريح البريد الإلكتروني
• قد يحتاج لتأكيد إضافي
```

---

## 🍪 نظام Remember Me

### كيف يعمل؟

```
┌────────────────────────────────────────────────────────┐
│  المستخدم يفعّل "تذكرني"                               │
│         ↓                                              │
│  يُخزن Token في LocalStorage                          │
│         ↓                                              │
│  صلاحية: 7 أيام                                        │
│         ↓                                              │
│  عند الزيارة القادمة:                                  │
│  • Token صالح → دخول تلقائي                           │
│  • Token منتهي → إعادة تسجيل الدخول                   │
└────────────────────────────────────────────────────────┘
```

---

## 📧 نظام التحقق من الإيميل

### تفاصيل الكود

| الخاصية       | القيمة   |
| ------------- | -------- |
| عدد الأرقام   | 6        |
| الصلاحية      | 10 دقائق |
| إعادة الإرسال | متاحة    |
| الشكل         | `123456` |

### قالب الإيميل

```html
┌────────────────────────────────────────┐ │ 🏆 مزادي - Mazzady │
├────────────────────────────────────────┤ │ مرحباً [الاسم]! │ │ │ │ كود التحقق
الخاص بك: │ │ │ │ ┌─────────────────────┐ │ │ │ 1 2 3 4 5 6 │ │ │
└─────────────────────┘ │ │ │ │ الكود صالح لمدة 10 دقائق │ │ │ │ إذا لم تطلب هذا
الكود، │ │ يرجى تجاهل هذه الرسالة. │ └────────────────────────────────────────┘
```

---

## 🔒 أمان كلمة المرور

### متطلبات القوة

```
✅ 8 أحرف على الأقل
✅ حرف كبير واحد على الأقل (A-Z)
✅ حرف صغير واحد على الأقل (a-z)
✅ رقم واحد على الأقل (0-9)
⭐ (اختياري) رمز خاص (!@#$%^&*)
```

### مؤشر قوة كلمة المرور

```
🔴 ضعيفة    │ أقل من 8 أحرف
🟡 متوسطة   │ 8+ أحرف، بعض المتطلبات
🟢 قوية     │ جميع المتطلبات محققة
```

### التشفير

```
bcrypt مع salt rounds = 10
```

---

## 🛡️ JWT Authentication

### Token Structure

```
┌────────────────────────────────────────────────────────┐
│                    Access Token                         │
├────────────────────────────────────────────────────────┤
│  Header:  { alg: "HS256", typ: "JWT" }                │
│  Payload: { userId, email, iat, exp }                  │
│  Signature: HMACSHA256(header + payload, secret)       │
├────────────────────────────────────────────────────────┤
│  الصلاحية: 7 أيام (قابلة للتعديل في .env)              │
└────────────────────────────────────────────────────────┘
```

### استخدام الـ Token

```
كل طلب للـ API:
Authorization: Bearer <token>
```

---

## 👤 التحقق من الهوية (Identity Verification)

### الخطوات

```
1️⃣ المستخدم يرفع صور البطاقة
        ↓
2️⃣ الحالة: "قيد المراجعة"
        ↓
3️⃣ الأدمن يراجع الصور
        ↓
4️⃣ القرار:
   ✅ موافقة → الحساب موثق
   ❌ رفض → إشعار للمستخدم
```

### حالات التحقق

| الحالة     | الوصف       | البادج |
| ---------- | ----------- | ------ |
| `pending`  | في الانتظار | 🟡     |
| `verified` | موثق        | ✅     |
| `rejected` | مرفوض       | ❌     |

---

## 🔄 نسيت كلمة المرور

### الآلية

```
1️⃣ المستخدم يدخل الإيميل
        ↓
2️⃣ إرسال كود استعادة (6 أرقام)
        ↓
3️⃣ التحقق من الكود
        ↓
4️⃣ إدخال كلمة مرور جديدة
        ↓
5️⃣ تأكيد التغيير
```

---

## 🚪 تسجيل الخروج

### ماذا يحدث؟

```
1️⃣ حذف Token من المتصفح
2️⃣ تحديث حالة المستخدم (offline)
3️⃣ توجيه لصفحة تسجيل الدخول
```

---

## ⚠️ رسائل الخطأ

| الكود | الرسالة                   | السبب                |
| ----- | ------------------------- | -------------------- |
| 401   | Unauthorized              | Token غير صالح/منتهي |
| 403   | Forbidden                 | صلاحيات غير كافية    |
| 409   | Email already exists      | الإيميل مستخدم       |
| 409   | Nickname already exists   | النيك نيم مستخدم     |
| 400   | Invalid verification code | كود خاطئ/منتهي       |

---

## 📱 واجهة المستخدم

### صفحة التسجيل

```
┌────────────────────────────────────────┐
│       🏆 مزادي                         │
│                                        │
│  ═══════════════════════════════════   │
│  [ 1 ]─[ 2 ]─[ 3 ]─...─[ 8 ]          │
│  ═══════════════════════════════════   │
│                                        │
│  ┌──────────────────────────────────┐  │
│  │     محتوى الخطوة الحالية         │  │
│  └──────────────────────────────────┘  │
│                                        │
│  [    ← السابق    ] [    التالي →    ] │
└────────────────────────────────────────┘
```

</div>
